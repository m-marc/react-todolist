(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{115:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(8),i=n.n(c);n(85),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l,o=n(22),u=n(32),s=n(35),d=n(10);!function(t){t.SET_TASKS="SET_TASKS",t.REMOVE_TASK="REMOVE_TASK",t.ADD_TASK="ADD_TASK",t.CHANGE_STATUS="CHANGE_TASK_STATUS",t.CHANGE_TITLE="CHANGE_TASK_TITLE"}(l||(l={}));var f;!function(t){t.REMOVE_LIST="REMOVE_LIST",t.ADD_LIST="ADD_TODOLIST",t.CHANGE_TITLE="CHANGE_LIST_TITLE",t.CHANGE_FILTER="CHANGE_LIST_FILTER",t.GET_TODOS="GET_TODOS"}(f||(f={}));var E,b,T,m={},k=[],O=n(31),p=n(65),C=Object(O.c)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l.SET_TASKS:var n=Object(d.a)({},t);return n[e.listId]=e.tasks,n;case f.GET_TODOS:var a=Object(d.a)({},t);return e.todos.forEach((function(t){return a[t.id]=[]})),a;case l.REMOVE_TASK:var r=Object(d.a)({},t);return r[e.listId]=r[e.listId].filter((function(t){return t.id!==e.taskId})),r;case l.ADD_TASK:var c=Object(d.a)({},t),i=c[e.task.todoListId];return c[e.task.todoListId]=[e.task].concat(Object(s.a)(i)),c;case l.CHANGE_STATUS:return Object(d.a)(Object(d.a)({},t),{},Object(u.a)({},e.listId,t[e.listId].map((function(t){return t.id===e.taskId?Object(d.a)(Object(d.a)({},t),{},{status:e.status}):t}))));case l.CHANGE_TITLE:return Object(d.a)(Object(d.a)({},t),{},Object(u.a)({},e.listId,t[e.listId].map((function(t){return t.id===e.taskId?Object(d.a)(Object(d.a)({},t),{},{title:e.title}):t}))));case f.ADD_LIST:return Object(d.a)(Object(d.a)({},t),{},Object(u.a)({},e.todo.id,[]));case f.REMOVE_LIST:var o=Object(d.a)({},t);return delete o[e.listId],o;default:return t}},todolist:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case f.REMOVE_LIST:return t.filter((function(t){return t.id!==e.listId}));case f.ADD_LIST:return[e.todo].concat(Object(s.a)(t));case f.CHANGE_TITLE:var n=t.find((function(t){return t.id===e.id}));return n&&(n.title=e.title),Object(s.a)(t);case f.CHANGE_FILTER:var a=t.find((function(t){return t.id===e.id}));return a&&(a.filter=e.filter),Object(s.a)(t);case f.GET_TODOS:return e.todos.map((function(t){return Object(d.a)(Object(d.a)({},t),{},{filter:"all"})}));default:return t}}}),v=Object(O.d)(C,Object(O.a)(p.a)),j=(n(91),n(66)),I=n.n(j);!function(t){t.KEY="18b18771-afed-41ec-9479-2b4a6392a481"}(E||(E={})),function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(b||(b={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(T||(T={}));var S={withCredentials:!0,headers:{"API-KEY":E.KEY}},h=I.a.create(Object(d.a)({baseURL:"https://social-network.samuraijs.com/api/1.1/"},S)),A=function(t){return h.post("todo-lists",{title:t}).then((function(t){return t.data}))},_=function(){return h.get("todo-lists")},g=function(t,e){return h.put("todo-lists/".concat(t),{title:e})},y=function(t){return h.delete("todo-lists/".concat(t))},L=function(t,e){return h.post("todo-lists/".concat(t,"/tasks"),{title:e})},D=function(t){return h.get("todo-lists/".concat(t,"/tasks"))},N=function(t,e,n){return h.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},G=function(t,e){return h.delete("todo-lists/".concat(t,"/tasks/").concat(e))},w=n(36),H=n(155),K=function(t){var e=t.title,n=t.onChange,c=Object(a.useState)(!1),i=Object(w.a)(c,2),l=i[0],o=i[1],u=Object(a.useState)(""),s=Object(w.a)(u,2),d=s[0],f=s[1];return l?r.a.createElement(H.a,{variant:"outlined",value:d,onBlur:function(){o(!1),n(d)},onChange:function(t){return f(t.currentTarget.value)},autoFocus:!0}):r.a.createElement("span",{onDoubleClick:function(){o(!0),f(e)}},e)},R=n(147),M=n(156),x=n(146),V=r.a.memo((function(t){var e=t.singleTask,n=t.deleteTaskCallback,c=t.changeStatusCallback,i=t.changeTaskTitle,l=t.listId,o=Object(a.useCallback)((function(t){return i(e.id,t,l)}),[i,l,e.id]);return r.a.createElement("div",{className:e.status===b.Completed?"is-done":""},r.a.createElement(M.a,{onChange:function(t){var n=t.currentTarget.checked;c(e.id,n?b.Completed:b.New,l)},color:"primary",checked:e.status===b.Completed}),r.a.createElement(K,{title:e.title,onChange:o}),r.a.createElement(x.a,{onClick:function(){return n(e.id,l)}},r.a.createElement(R.a,null)))})),F=n(148),U=r.a.memo((function(t){var e=t.addItem,n=Object(a.useState)(""),c=Object(w.a)(n,2),i=c[0],l=c[1],o=Object(a.useState)(null),u=Object(w.a)(o,2),s=u[0],d=u[1],f=function(){""!==i.trim()?(e(i),l("")):d("Title is required")};return r.a.createElement("div",null,r.a.createElement(H.a,{variant:"outlined",value:i,onChange:function(t){l(t.currentTarget.value)},onKeyPress:function(t){s&&d(null),"Enter"===t.key&&f()},error:!!s,label:"Title",helperText:s}),r.a.createElement(x.a,{color:"primary",onClick:f},r.a.createElement(F.a,null)))})),P=n(149),B=function(t){return function(e){return D(t).then((function(n){return e(function(t,e){return{type:l.SET_TASKS,tasks:t,listId:e}}(n.data.items,t))}))}},Y=function(t,e){return function(n){return L(t,e).then((function(t){return n((e=t.data.data.item,{type:l.ADD_TASK,task:e}));var e}))}},J=function(t,e,n){return function(a,r){var c=r().tasks[t].find((function(t){return t.id===e}));c&&N(t,e,{title:c.title,startDate:c.startDate,priority:c.priority,description:c.description,deadline:c.deadline,status:n}).then((function(){return a(function(t,e,n){return{type:l.CHANGE_STATUS,listId:t,taskId:e,status:n}}(t,e,n))}))}},W=function(t,e){return function(n){return G(t,e).then((function(a){return n(function(t,e){return{type:l.REMOVE_TASK,listId:t,taskId:e}}(t,e))}))}},q=function(t,e,n){return function(a,r){var c=r().tasks[t].find((function(t){return t.id===e}));c&&N(t,e,{title:n,startDate:c.startDate,priority:c.priority,description:c.description,deadline:c.deadline,status:c.status}).then((function(){return a(function(t,e,n){return{type:l.CHANGE_TITLE,listId:t,taskId:e,title:n}}(t,e,n))}))}},$=r.a.memo((function(t){var e=t.tasks,n=t.deleteTaskCallback,c=t.changeStatusCallback,i=t.changeTaskTitle,l=t.changeListTitle,u=t.addTaskCallback,s=t.title,d=t.changeFilter,f=t.filter,E=t.id,T=t.removeListCallback,m=Object(o.b)();Object(a.useEffect)((function(){m(B(E))}),[m,E]);var k=e;"completed"===f?k=e.filter((function(t){return t.status===b.Completed})):"active"===f&&(k=e.filter((function(t){return t.status===b.New})));var O=k.map((function(t){return r.a.createElement(V,{key:t.id,listId:E,singleTask:t,deleteTaskCallback:n,changeStatusCallback:c,changeTaskTitle:i})})),p=Object(a.useCallback)((function(){return d(E,"all")}),[d,E]),C=Object(a.useCallback)((function(){return d(E,"active")}),[d,E]),v=Object(a.useCallback)((function(){return d(E,"completed")}),[d,E]),j=Object(a.useCallback)((function(t){return u(E,t)}),[u,E]);return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r.a.createElement("h3",null,r.a.createElement(K,{title:s,onChange:function(t){return l(E,t)}})),r.a.createElement(x.a,{onClick:function(){return T(E)}},r.a.createElement(R.a,null))),r.a.createElement(U,{addItem:j}),r.a.createElement("ul",null,O),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(P.a,{variant:"all"===f?"outlined":"text",color:"default",onClick:p},"All"),r.a.createElement(P.a,{variant:"active"===f?"outlined":"text",color:"primary",onClick:C},"Active"),r.a.createElement(P.a,{variant:"completed"===f?"outlined":"text",color:"secondary",onClick:v},"Completed")))})),z=n(150),Q=n(151),X=n(152),Z=n(153),tt=n(154),et=n(117),nt=n(70),at=n.n(nt),rt=function(){return function(t){_().then((function(e){return t((n=e.data,{type:f.GET_TODOS,todos:n}));var n}))}},ct=function(t){return function(e){y(t).then((function(n){return e(function(t){return{type:f.REMOVE_LIST,listId:t}}(t))}))}},it=function(t){return function(e){A(t).then((function(t){return e((n=t.data.item,{type:f.ADD_LIST,todo:n}));var n}))}},lt=function(t,e){return function(n){g(t,e).then((function(a){return n(function(t,e){return{type:f.CHANGE_TITLE,id:t,title:e}}(t,e))}))}};var ot=function(){var t=Object(o.b)();Object(a.useEffect)((function(){t(rt())}),[t]);var e=Object(o.c)((function(t){return t.todolist})),n=Object(o.c)((function(t){return t.tasks})),c=Object(a.useCallback)((function(e,n){t(W(n,e))}),[t]),i=Object(a.useCallback)((function(e,n){t(Y(e,n))}),[t]),l=Object(a.useCallback)((function(e,n,a){t(J(a,e,n))}),[t]),u=Object(a.useCallback)((function(e,n,a){t(q(a,e,n))}),[t]),s=Object(a.useCallback)((function(e,n){t(function(t,e){return{type:f.CHANGE_FILTER,id:t,filter:e}}(e,n))}),[t]),d=Object(a.useCallback)((function(e){t(ct(e))}),[t]),E=Object(a.useCallback)((function(e,n){t(lt(e,n))}),[t]),b=Object(a.useCallback)((function(e){t(it(e))}),[t]);return r.a.createElement("div",{className:"App"},r.a.createElement(z.a,{position:"static"},r.a.createElement(Q.a,null,r.a.createElement(x.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(at.a,null)),r.a.createElement(X.a,{variant:"h6"},"Simple Todolist"))),r.a.createElement(Z.a,{fixed:!0},r.a.createElement(tt.a,{container:!0,style:{padding:"20px 0"}},r.a.createElement(U,{addItem:b})),r.a.createElement(tt.a,{container:!0,spacing:3},e.map((function(t){return r.a.createElement(tt.a,{item:!0},r.a.createElement(et.a,{style:{padding:"20px"}},r.a.createElement($,{key:t.id,id:t.id,title:t.title,tasks:n[t.id],deleteTaskCallback:c,changeFilter:s,addTaskCallback:i,changeStatusCallback:l,changeTaskTitle:u,changeListTitle:E,filter:t.filter,removeListCallback:d})))})))))};i.a.render(r.a.createElement(o.a,{store:v},r.a.createElement(ot,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},80:function(t,e,n){t.exports=n(115)},85:function(t,e,n){},91:function(t,e,n){}},[[80,1,2]]]);
//# sourceMappingURL=main.ca39c4b0.chunk.js.map